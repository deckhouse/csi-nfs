{{- /* RBAC */ -}}
{{- $rbacConfig := dict
  "roleRules" (list
    (dict "apiGroups" (list "") "resources" (list "secrets") "verbs" (list "get" "list" "watch" "create" "update" "delete"))
    (dict "apiGroups" (list "") "resources" (list "pods") "verbs" (list "get" "list" "watch" "update" "delete"))
    (dict "apiGroups" (list "") "resources" (list "events") "verbs" (list "create" "list"))
    (dict "apiGroups" (list "coordination.k8s.io") "resources" (list "leases") "verbs" (list "get" "watch" "list" "delete" "update" "create"))
  )
  "clusterRoleRules" (list
    (dict "apiGroups" (list "storage.deckhouse.io") "resources" (list "nfsstorageclasses" "nfsstorageclasses/status") "verbs" (list "get" "list" "create" "watch" "update"))
    (dict "apiGroups" (list "storage.k8s.io") "resources" (list "storageclasses") "verbs" (list "create" "delete" "list" "get" "watch" "update"))
    (dict "apiGroups" (list "deckhouse.io") "resources" (list "moduleconfigs") "verbs" (list "get" "watch" "list"))
    (dict "apiGroups" (list "snapshot.storage.k8s.io") "resources" (list "volumesnapshots") "verbs" (list "get" "list" "watch"))
    (dict "apiGroups" (list "snapshot.storage.k8s.io") "resources" (list "volumesnapshotclasses") "verbs" (list "create" "delete" "list" "get" "watch" "update"))
    (dict "apiGroups" (list "") "resources" (list "persistentvolumeclaims" "pods" "namespaces") "verbs" (list "get" "list" "watch"))
    (dict "apiGroups" (list "") "resources" (list "nodes") "verbs" (list "get" "list" "watch" "update"))
  )
}}
{{ include "helm_lib_module_controller_rbac" (list . $rbacConfig) }}
